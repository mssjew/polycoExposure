<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders Shipped - September 2025 Onwards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.08);
        }

        .header-section {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 3px solid #e9ecef;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 32px;
            font-weight: 600;
        }

        .subtitle {
            color: #6c757d;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .summary-section {
            margin-bottom: 40px;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .summary-card {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            min-width: 200px;
        }

        .summary-title {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-value {
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
        }

        .orders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .order-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 5px solid #28a745;
            cursor: pointer;
        }

        .order-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .card-header {
            background: linear-gradient(135deg, #5a67d8, #667eea);
            color: white;
            padding: 20px;
            position: relative;
        }

        .po-number {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .product-name {
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .card-body {
            padding: 20px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #f1f3f4;
        }

        .detail-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .detail-label {
            font-size: 13px;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            font-size: 16px;
            color: #2c3e50;
            font-weight: 600;
        }

        .detail-value.amount {
            color: #28a745;
            font-size: 18px;
            font-weight: 700;
        }

        .detail-value.date {
            color: #007bff;
        }

        .status-badge {
            background: #d4edda;
            color: #155724;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .filter-section {
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
            min-width: 150px;
        }

        .filter-select:focus {
            outline: none;
            border-color: #2196f3;
        }

        .no-orders {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
            font-size: 18px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #5a67d8, #667eea);
            color: white;
            padding: 25px;
            position: relative;
        }

        .modal-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .modal-subtitle {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .close {
            color: white;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        .close:hover,
        .close:focus {
            opacity: 0.7;
        }

        .modal-body {
            padding: 30px;
            background: white;
        }

        .modal-section {
            margin-bottom: 25px;
        }

        .modal-section:last-child {
            margin-bottom: 0;
        }

        .modal-section-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #f1f3f4;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modal-detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f8f9fa;
        }

        .modal-detail-row:last-child {
            border-bottom: none;
        }

        .modal-detail-label {
            font-size: 14px;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            flex: 1;
        }

        .modal-detail-value {
            font-size: 16px;
            color: #2c3e50;
            font-weight: 600;
            flex: 1;
            text-align: right;
        }

        .modal-detail-value.amount {
            color: #28a745;
            font-size: 18px;
            font-weight: 700;
        }

        .modal-detail-value.date {
            color: #007bff;
        }

        .modal-detail-value.tbd {
            color: #ffc107;
            font-style: italic;
        }

        .modal-status-badge {
            background: #d4edda;
            color: #155724;
            padding: 6px 16px;
            border-radius: 25px;
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .orders-grid {
                grid-template-columns: 1fr;
            }

            .filter-section {
                flex-direction: column;
                gap: 10px;
            }

            h1 {
                font-size: 24px;
            }

            .summary-section {
                flex-direction: column;
            }
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
                max-width: 100%;
            }
            .filter-section {
                display: none;
            }
            .order-card:hover {
                transform: none;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-section">
            <h1>üì¶ Orders Shipped</h1>
            <div class="subtitle">Q4 2025</div>
            <div style="margin-top: 20px;">
                <a href="polyco-historical-order-details.html" style="display: inline-block; padding: 10px 24px; background: #2c3e50; color: white; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 14px; transition: background 0.3s ease; margin-right: 10px;">
                    ‚Üê Back to Order Details
                </a>
                <a href="index.html" style="display: inline-block; padding: 10px 24px; background: #007bff; color: white; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 14px; transition: background 0.3s ease;">
                    View Exposure Dashboard
                </a>
            </div>
        </div>


        <div class="filter-section">
            <select class="filter-select" id="monthFilter">
                <option value="">All Months</option>
                <option value="09-2025">September 2025</option>
                <option value="10-2025">October 2025</option>
                <option value="11-2025">November 2025</option>
            </select>
            <select class="filter-select" id="productFilter">
                <option value="">All Products</option>
            </select>
            <select class="filter-select" id="shippingStatusFilter">
                <option value="">All Shipping Status</option>
                <option value="not-shipped">Not Shipped</option>
                <option value="shipped-en-route">Shipped En Route</option>
                <option value="delivered">Delivered</option>
            </select>
        </div>

        <div class="orders-grid" id="ordersGrid">
            <!-- Orders will be populated by JavaScript -->
        </div>

        <!-- Modal -->
        <div id="orderModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="close" id="closeModal">&times;</span>
                    <div class="modal-title" id="modalPONumber">PO Number</div>
                    <div class="modal-subtitle" id="modalProductName">Product Name</div>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <div class="modal-section-title">Order Details</div>
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">Delivered Value</span>
                            <span class="modal-detail-value amount" id="modalDeliveredValue">$0</span>
                        </div>
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">Delivery Date</span>
                            <span class="modal-detail-value date" id="modalDeliveryDate">-</span>
                        </div>
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">Product Type</span>
                            <span class="modal-detail-value" id="modalProductType">-</span>
                        </div>
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">Lamination Rolls Used</span>
                            <span class="modal-detail-value" id="modalLaminationRolls">-</span>
                        </div>
                    </div>
                    
                    <div class="modal-section">
                        <div class="modal-section-title">Shipping Information</div>
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">Container Number</span>
                            <span class="modal-detail-value tbd">TBD</span>
                        </div>
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">BL Number</span>
                            <span class="modal-detail-value tbd">TBD</span>
                        </div>
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">Destination</span>
                            <span class="modal-detail-value tbd">TBD</span>
                        </div>
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">Shipping Status</span>
                            <span class="modal-detail-value" id="modalShippingStatus">TBD</span>
                        </div>
                    </div>
                    
                    <div class="modal-section">
                        <div class="modal-detail-row">
                            <span class="modal-detail-label">Status</span>
                            <span class="modal-status-badge">Shipped</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Function to parse currency values
        function parseCurrency(value) {
            if (!value || value === '-' || value === '') return 0;
            return parseFloat(value.toString().replace(/[$,]/g, '')) || 0;
        }

        // Function to format currency
        function formatCurrency(value) {
            const num = parseCurrency(value);
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(num);
        }

        // Function to parse dates
        function parseDate(dateStr) {
            if (!dateStr || dateStr === '' || dateStr === '-' || dateStr.toLowerCase() === 'on hold') {
                return null;
            }
            
            let parsedDate = null;
            
            // Format: "18-09-2025" or "28-10-2025" (DD-MM-YYYY)
            if (dateStr.match(/^\d{1,2}-\d{1,2}-\d{4}$/)) {
                const parts = dateStr.split('-');
                const day = parseInt(parts[0]);
                const month = parseInt(parts[1]) - 1; // Month is 0-indexed in JS Date
                const year = parseInt(parts[2]);
                parsedDate = new Date(year, month, day);
            }
            // Format: "18-Sep-2025" or "28-Oct-2025" (DD-MMM-YYYY)
            else if (dateStr.includes('-') && dateStr.length <= 11) {
                const parts = dateStr.split('-');
                if (parts.length === 3) {
                    const day = parts[0];
                    const month = parts[1];
                    const year = parts[2];
                    
                    const monthMap = {
                        'Jan': 0, 'Feb': 1, 'Mar': 2, 'Apr': 3,
                        'May': 4, 'Jun': 5, 'Jul': 6, 'Aug': 7,
                        'Sep': 8, 'Oct': 9, 'Nov': 10, 'Dec': 11
                    };
                    
                    if (monthMap[month] !== undefined) {
                        parsedDate = new Date(parseInt(year), monthMap[month], parseInt(day));
                    }
                }
            }
            
            return (!parsedDate || isNaN(parsedDate.getTime())) ? null : parsedDate;
        }

        // Function to format date consistently
        function formatDate(dateStr) {
            const date = parseDate(dateStr);
            if (!date) {
                return dateStr || '';
            }
            
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                           'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            const day = date.getDate().toString().padStart(2, '0');
            const month = months[date.getMonth()];
            const year = date.getFullYear();
            
            return `${day}-${month}-${year}`;
        }

        // Raw order data (filtered from the main dataset)
        const shippedOrders = [
            {
                sno: "35",
                poNumber: "PO.2466447-2 05/09/25",
                productName: "7x7 Tray",
                poAmount: "37,939.20",
                invoiceAmount: "37,939.20",
                deliveredValue: "35,765.00",
                fundsReceived: "",
                deliveryDate: "18-09-2025",
                shippingStatus: "delivered"
            },
            {
                sno: "36",
                poNumber: "PO.2466448-2 05/09/25",
                productName: "7x7 Tray",
                poAmount: "37,939.20",
                invoiceAmount: "37,939.20",
                deliveredValue: "34,856.64",
                fundsReceived: "",
                deliveryDate: "25-09-2025",
                shippingStatus: "shipped-en-route"
            },
            {
                sno: "",
                poNumber: "PO 2574888-2 08/05/25",
                productName: "2\" Everytable Tray",
                poAmount: "25,872.00",
                invoiceAmount: "25,872.00",
                deliveredValue: "29,360.00",
                fundsReceived: "",
                deliveryDate: "29-09-2025",
                shippingStatus: "delivered"
            },
            {
                sno: "",
                poNumber: "PO-2574889-1",
                productName: "2\" Everytable Tray / point five tray Lid",
                poAmount: "31,489.92",
                invoiceAmount: "31,489.92",
                deliveredValue: "31,178.88",
                fundsReceived: "",
                deliveryDate: "29-10-2025",
                shippingStatus: "shipped-en-route"
            },
            {
                sno: "",
                poNumber: "PO.2573352-1 08/05/25",
                productName: "Platinum Tray 1",
                poAmount: "34,816.00",
                invoiceAmount: "34,816.00",
                deliveredValue: "34,990.00",
                fundsReceived: "",
                deliveryDate: "13-10-2025",
                shippingStatus: "delivered"
            },
            {
                sno: "85",
                poNumber: "PO.2573202-1 12304/25",
                productName: "Oasis Tray",
                poAmount: "32,896.50",
                invoiceAmount: "32,896.50",
                deliveredValue: "40,782.00",
                fundsReceived: "",
                deliveryDate: "21-10-2025",
                shippingStatus: "shipped-en-route"
            },
            {
                sno: "86",
                poNumber: "PO.2573203-1 23/04/25",
                productName: "Oasis Tray",
                poAmount: "32,896.50",
                invoiceAmount: "32,896.50",
                deliveredValue: "34,009.50",
                fundsReceived: "",
                deliveryDate: "22-09-2025",
                shippingStatus: "delivered"
            },
            {
                sno: "22",
                poNumber: "PO.2465639 - 30/01/24",
                productName: "7x7 Tray",
                poAmount: "37,939.20",
                invoiceAmount: "37,939.20",
                deliveredValue: "35,923.68",
                fundsReceived: "",
                deliveryDate: "28-10-2025",
                shippingStatus: "not-shipped"
            },
            {
                sno: "83",
                poNumber: "PO.2572995-2 10/04/25",
                productName: "Oasis Tray",
                poAmount: "32,896.50",
                invoiceAmount: "32,896.50",
                deliveredValue: "41,160.00",
                fundsReceived: "",
                deliveryDate: "10-09-2025",
                shippingStatus: "delivered"
            },
            {
                sno: "84",
                poNumber: "PO.2572996-2 10/04/25",
                productName: "Oasis Tray",
                poAmount: "32,896.50",
                invoiceAmount: "32,896.50",
                deliveredValue: "41,443.50",
                fundsReceived: "",
                deliveryDate: "21-09-2025",
                shippingStatus: "delivered"
            },
            {
                sno: "87",
                poNumber: "PO.2573204-1 23/04/25",
                productName: "Oasis Tray",
                poAmount: "32,896.50",
                invoiceAmount: "32,896.50",
                deliveredValue: "42,000.00",
                fundsReceived: "",
                deliveryDate: "20-11-2025",
                shippingStatus: "shipped-en-route"
            },
            {
                sno: "88",
                poNumber: "PO.2573205-1 23/04/25",
                productName: "Oasis Tray",
                poAmount: "32,896.50",
                invoiceAmount: "32,896.50",
                deliveredValue: "42,000.00",
                fundsReceived: "",
                deliveryDate: "22-11-2025",
                shippingStatus: "not-shipped"
            },
            {
                sno: "125",
                poNumber: "PO 2576194-1 18/11/25",
                productName: "Point Five Fibre Tray 2'' PET Laminated",
                poAmount: "6,451.20",
                invoiceAmount: "6,451.20",
                deliveredValue: "",
                fundsReceived: "",
                deliveryDate: "23-11-2025",
                shippingStatus: "not-shipped"
            },
            {
                sno: "129",
                poNumber: "PO.2576311-1",
                productName: "Potato tray 7x7",
                poAmount: "",
                invoiceAmount: "",
                deliveredValue: "4,742.40",
                fundsReceived: "",
                deliveryDate: "23-11-2025",
                shippingStatus: "shipped-en-route"
            }
        ];

        let filteredOrders = [...shippedOrders];

        // Populate product filter
        function populateProductFilter() {
            const products = new Set();
            shippedOrders.forEach(order => {
                if (order.productName) {
                    products.add(order.productName);
                }
            });
            
            const productFilter = document.getElementById('productFilter');
            Array.from(products).sort().forEach(product => {
                const option = document.createElement('option');
                option.value = product;
                option.textContent = product;
                productFilter.appendChild(option);
            });
        }


        // Render order cards
        function renderOrders() {
            const ordersGrid = document.getElementById('ordersGrid');
            ordersGrid.innerHTML = '';

            if (filteredOrders.length === 0) {
                ordersGrid.innerHTML = '<div class="no-orders">No shipped orders found for the selected criteria.</div>';
                return;
            }

            // Sort by delivery date (newest first)
            filteredOrders.sort((a, b) => {
                const dateA = parseDate(a.deliveryDate);
                const dateB = parseDate(b.deliveryDate);
                if (!dateA && !dateB) return 0;
                if (!dateA) return 1;
                if (!dateB) return -1;
                return dateB.getTime() - dateA.getTime();
            });

            filteredOrders.forEach(order => {
                const card = document.createElement('div');
                card.className = 'order-card';

                const deliveredValue = parseCurrency(order.deliveredValue);
                const poDisplay = order.poNumber || 'No PO Number';
                const productDisplay = order.productName || 'Unknown Product';

                // Determine if product uses lamination
                const isLaminated = productDisplay.toLowerCase().includes('7x7 tray') ||
                                   productDisplay.toLowerCase().includes('everytable tray') ||
                                   productDisplay.toLowerCase().includes('platinum tray 1') ||
                                   productDisplay.toLowerCase().includes('platinum 1') ||
                                   productDisplay.toLowerCase().includes('pet laminated') ||
                                   productDisplay.toLowerCase().includes('potato tray');

                card.innerHTML = `
                    <div class="card-header">
                        <div class="po-number">${poDisplay}</div>
                        <div class="product-name">${productDisplay}</div>
                    </div>
                    <div class="card-body">
                        <div class="detail-row">
                            <span class="detail-label">Delivered Value</span>
                            <span class="detail-value amount">${deliveredValue > 0 ? formatCurrency(deliveredValue) : 'N/A'}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Delivery Date</span>
                            <span class="detail-value date">${formatDate(order.deliveryDate)}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Product Type</span>
                            <span class="detail-value">${isLaminated ? 'Laminated' : 'Non-Laminated'}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Lamination Rolls Used</span>
                            <span class="detail-value">${isLaminated ? '' : ''}</span>
                        </div>
                    </div>
                `;

                // Add click event to open modal
                card.addEventListener('click', () => openModal(order, isLaminated));

                ordersGrid.appendChild(card);
            });
        }

        // Filter orders
        function filterOrders() {
            const monthFilter = document.getElementById('monthFilter').value;
            const productFilter = document.getElementById('productFilter').value;
            const shippingStatusFilter = document.getElementById('shippingStatusFilter').value;

            filteredOrders = shippedOrders.filter(order => {
                // Month filter
                let matchesMonth = !monthFilter;
                if (monthFilter && order.deliveryDate) {
                    const date = parseDate(order.deliveryDate);
                    if (date) {
                        const orderMonth = `${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getFullYear()}`;
                        matchesMonth = orderMonth === monthFilter;
                    }
                }

                // Product filter
                const matchesProduct = !productFilter || (order.productName && order.productName.includes(productFilter));

                // Shipping status filter
                const matchesShippingStatus = !shippingStatusFilter || order.shippingStatus === shippingStatusFilter;

                return matchesMonth && matchesProduct && matchesShippingStatus;
            });

            renderOrders();
        }

        // Modal functions
        function openModal(order, isLaminated) {
            const modal = document.getElementById('orderModal');
            const deliveredValue = parseCurrency(order.deliveredValue);
            const poDisplay = order.poNumber || 'No PO Number';
            const productDisplay = order.productName || 'Unknown Product';

            // Convert shipping status to display format
            const shippingStatusDisplay = {
                'not-shipped': 'Not Shipped',
                'shipped-en-route': 'Shipped En Route',
                'delivered': 'Delivered'
            }[order.shippingStatus] || 'TBD';

            // Populate modal data
            document.getElementById('modalPONumber').textContent = poDisplay;
            document.getElementById('modalProductName').textContent = productDisplay;
            document.getElementById('modalDeliveredValue').textContent = deliveredValue > 0 ? formatCurrency(deliveredValue) : 'N/A';
            document.getElementById('modalDeliveryDate').textContent = formatDate(order.deliveryDate);
            document.getElementById('modalProductType').textContent = isLaminated ? 'Laminated' : 'Non-Laminated';
            document.getElementById('modalLaminationRolls').textContent = isLaminated ? '' : 'N/A';
            document.getElementById('modalShippingStatus').textContent = shippingStatusDisplay;

            // Show modal
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeModal() {
            const modal = document.getElementById('orderModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto'; // Restore scrolling
        }

        // Event listeners
        document.getElementById('monthFilter').addEventListener('change', filterOrders);
        document.getElementById('productFilter').addEventListener('change', filterOrders);
        document.getElementById('shippingStatusFilter').addEventListener('change', filterOrders);

        // Modal event listeners
        document.getElementById('closeModal').addEventListener('click', closeModal);
        
        // Close modal when clicking outside of it
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('orderModal');
            if (event.target === modal) {
                closeModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });

        // Initialize
        populateProductFilter();
        renderOrders();
    </script>
</body>
</html>